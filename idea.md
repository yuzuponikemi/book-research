# Project Cogito — 拡張アイデア集

現在のアーキテクチャ（テキスト取得 → 概念抽出 → 統合 → 研究/批評 → カリキュラム設計 → 台本生成 → 音声合成 → 翻訳）を土台に、どのような拡張が考えられるかをまとめる。

---

## 1. 出力形式の多様化

### 1a. コンセプトグラフの可視化
現在は JSON/Markdown のみ。概念間の関係を **Mermaid / Graphviz / D3.js** で可視化すれば、読書ガイドや講義資料として使える。ノード=概念、エッジ=depends_on/contradicts/evolves_into で自然にグラフになる。

### 1b. スライドデッキ自動生成
シラバスの各エピソードから **reveal.js / PPTX** のスライドを生成する。cognitive_bridge → 導入スライド、概念解説 → 本体、cliffhanger → 次回予告、という構造がそのまま使える。

### 1c. クイズ・練習問題生成
概念グラフ + アポリアから、理解度チェック用の問題を自動生成する。選択肢問題（概念の定義）、記述問題（アポリアに対する自分の立場）、関連付け問題（概念間の関係を説明）など。教育用途での価値が大きい。

### 1d. Anki カード生成
概念 → 表面、定義 + 原文引用 → 裏面として、Anki 形式（CSV / `.apkg`）で出力する。哲学用語の暗記・復習に直結する。

---

## 2. 入力ソースの拡張

### 2a. PDF / EPUB 対応
現在は Gutenberg テキスト・Markdown・URL のみ。`pymupdf` や `ebooklib` で PDF/EPUB を直接取り込めれば、手持ちの書籍をすぐにパイプラインに投入できる。OCR 付き PDF も `tesseract` 連携で対応可能。

### 2b. 論文（arxiv / 学術 DB）対応
arxiv API や Semantic Scholar API から論文を取得し、Abstract → Method → Results → Discussion のチャンキング戦略を追加する。哲学に限らず、科学論文の解説ポッドキャストが作れるようになる。

### 2c. 多言語ソーステキスト
フランス語・ドイツ語・ラテン語等の原典を直接分析できるようにする。Reader 層のプロンプトに言語指定を追加し、概念抽出は英語で統一（下流の一貫性のため）。デカルト『方法序説』のフランス語原文やカント『純粋理性批判』のドイツ語原文を扱えると本格的。

---

## 3. パイプラインの高度化

### 3a. マルチブック・カリキュラム
複数の書籍を横断したカリキュラム設計。例: デカルト → スピノザ → ライプニッツ で「大陸合理論」シリーズを作る。各書籍のコンセプトグラフを統合し、書籍間の概念的つながり（影響関係、批判関係）を可視化する。

### 3b. 反復的品質改善（Self-Critique ループ）
台本生成後に LLM 自身が台本を評価し、不足している論点・不自然な対話・原文引用の欠如を指摘 → 再生成するループ。LangGraph の条件分岐で「品質スコア < 閾値なら再実行」を実装できる。

### 3c. RAG による概念検索
生成されたコンセプトグラフを **ChromaDB / FAISS** にインデックスし、台本生成時に関連概念を動的に検索する。大規模な書籍（数百概念）でコンテキストウィンドウに収まらない場合に有効。

### 3d. エージェント的分析
現在の Reader は1回の LLM コールで分析を完了する。代わりに、LangChain Agent として「もっと深く掘り下げるべきか」「別の視点から再分析すべきか」を自己判断させる。ツールとして原文チャンクの再読込、既出概念の参照、追加検索を持たせる。

---

## 4. 対話・音声の進化

### 4a. マルチスピーカー討論
現在は2人の対話のみ。3人以上のパネルディスカッション形式を追加する。例: 「デカルト本人 × パスカル × 現代の神経科学者」。ペルソナ設定を N 人対応に拡張し、scriptwriter のプロンプトを討論形式に変更する。

### 4b. リスナー参加型シナリオ
台本に分岐点（「ここであなたならどう考えますか？」）を埋め込み、インタラクティブなポッドキャスト体験を作る。Web UI と組み合わせれば、選択肢によって次の展開が変わる形式も可能。

### 4c. 音声エンジンの多様化
VOICEVOX 以外に **Google Cloud TTS**、**ElevenLabs**、**Style-BERT-VITS2** 等を選択可能にする。英語音声や感情表現の豊かな音声が使えるようになる。`src/audio/` に抽象インターフェースを定義し、エンジンを差し替え可能にする。

### 4d. BGM・効果音の自動挿入
台本の構造（幕の切り替え、クライマックス、クリフハンガー）に応じて BGM や効果音を自動挿入する。pydub で既存の音声ファイルにミキシングする形で実装できる。

### 4e. 動画生成
音声 + スライド + コンセプトグラフ可視化を組み合わせて、YouTube 向けの解説動画を自動生成する。`moviepy` で音声にスライド画像を同期させる。

---

## 5. ユーザー体験の改善

### 5a. Web UI ダッシュボード
パイプラインの進行状況をリアルタイムで表示する Web UI。各ステージの入出力を閲覧・編集でき、中間結果を確認してから次のステージに進める。FastAPI + React で、LangGraph の streaming を WebSocket で配信する。Phoenix トレーシング（実装済み）との統合も自然。

### 5b. 対話的パイプライン（Human-in-the-Loop）
LangGraph の `interrupt_before` / `interrupt_after` を使い、重要なステージ（概念グラフ統合後、シラバス生成後）でユーザーに確認を求める。「この概念は不要」「このエピソード構成を変えたい」といったフィードバックを反映してから続行する。

### 5c. プロンプトのカスタマイズ UI
現在はソースコード内にハードコードされたプロンプトを、YAML/テンプレートに外出しし、ユーザーが Web UI 上で編集・A/B テストできるようにする。

---

## 6. 分析の深化

### 6a. 時代横断的コンテキスト
書籍の時代背景を自動的に調査し、同時代の出来事・思想潮流を概念グラフに注入する。例: デカルト（1637）→ 三十年戦争の文脈、ガリレオ裁判の影響。Wikidata / Wikipedia API から年代情報を自動取得する。

### 6b. 感情・レトリック分析の強化
現在の rhetorical_strategies 抽出を拡張し、テキストの感情曲線（emotional arc）を可視化する。各チャンクの論調（懐疑的 → 確信 → 不安）をプロットし、台本の感情設計に活用する。

### 6c. 原典比較分析
同じ著者の複数著作、または異なる翻訳版を比較分析する。概念の発展・変化を追跡し、「『方法序説』vs『省察』でのコギトの扱いの違い」のような比較コンテンツを生成する。

### 6d. 引用ネットワーク分析
テキスト内の引用・参照関係を抽出し、知的影響のネットワークを構築する。Semantic Scholar の引用データと組み合わせれば、思想史の可視化ツールになる。

---

## 7. 配信・公開

### 7a. ポッドキャスト RSS フィード生成
生成された音声ファイルから、Apple Podcasts / Spotify 互換の RSS フィードを自動生成する。エピソードのメタデータ（タイトル、概要、duration）はシラバスから取得できる。

### 7b. ブログ記事の自動生成
台本のテキスト版 + コンセプトグラフの解説を組み合わせて、ブログ記事を自動生成する。ポッドキャストの補助コンテンツとして公開できる。reading_material をベースに、よりカジュアルな文体に変換する。

### 7c. Notion / Obsidian エクスポート
コンセプトグラフを Obsidian のナレッジグラフ形式（各概念 = 1ノート、`[[リンク]]` で関係を表現）でエクスポートする。哲学の個人知識ベース構築に直結する。

---

## 8. 技術基盤の進化

### 8a. クラウド LLM 対応
Ollama（ローカル）に加えて、**OpenAI GPT-4o**、**Anthropic Claude**、**Google Gemini** を選択可能にする。`ChatOllama` の代わりに `ChatOpenAI` / `ChatAnthropic` を差し込む形で、`langchain` の抽象化がそのまま使える。高品質な分析が必要な場合や、GPU なし環境での実行に有用。

### 8b. 並列チャンク分析
現在は Apple Silicon の制約で逐次処理。クラウド LLM や複数 GPU 環境では、チャンク分析を並列化して大幅に高速化できる。LangGraph の `map-reduce` パターンで実装可能。

### 8c. 評価フレームワーク
生成物の品質を自動評価する仕組み。概念抽出の網羅性（人手アノテーションとの比較）、台本の自然さ（perplexity 測定）、音声品質（MOS スコア）を定量的に測定する。CI/CD に組み込んでプロンプト変更の影響を追跡する。

### 8d. キャッシュと増分処理
同じ書籍・同じモデルで再実行した場合、変更のないステージの結果をキャッシュから再利用する。コンテンツのハッシュベースで判定し、プロンプト調整時のイテレーションを高速化する。

---

## 優先度の目安

| 優先度 | アイデア | 理由 |
|--------|---------|------|
| **高** | 5b. Human-in-the-Loop | パイプライン品質に直結。LangGraph の機能を活用 |
| **高** | 3b. Self-Critique ループ | 台本品質の安定化。既存アーキテクチャ内で完結 |
| **高** | 1a. コンセプトグラフ可視化 | 低コストで大きなインパクト。データは既にある |
| **中** | 8a. クラウド LLM 対応 | LangChain の抽象化で比較的容易。利用者層が広がる |
| **中** | 2a. PDF/EPUB 対応 | 入力ソースの自由度が大幅に向上 |
| **中** | 4c. 音声エンジン多様化 | 英語ポッドキャスト対応への道が開ける |
| **中** | 7c. Obsidian エクスポート | 個人知識管理との統合。実装コストが低い |
| **低** | 3a. マルチブック | 魅力的だが設計が大きい |
| **低** | 4e. 動画生成 | 価値は高いが実装・品質管理が重い |
| **低** | 7a. RSS フィード | 公開フェーズで必要になる |
